"use strict";(()=>{var e={};e.id=340,e.ids=[340],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:e=>{e.exports=require("path")},710:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>E,patchFetch:()=>S,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>w,staticGenerationAsyncStorage:()=>g});var r={};s.r(r),s.d(r,{GET:()=>l,POST:()=>p,dynamic:()=>c});var i=s(9303),n=s(8716),a=s(670),o=s(7070),u=s(5610);let c="force-dynamic";async function l(){let e=await (0,u.zA)();return o.NextResponse.json(e.currentSession)}async function p(e){try{let{action:t}=await e.json();if("RESUME"===t){let e=await (0,u.CT)(e=>{if("LOCKED"===e.status)throw Error("Session is LOCKED. Use RESTORE.");return{...e,status:"RUNNING"}});return o.NextResponse.json(e)}if("RESTORE"===t){let e=await (0,u.CT)(e=>"LOCKED"!==e.status?e:{...e,status:"RUNNING",warningTriggered:!1,violations:[]});return o.NextResponse.json(e)}if("PAUSE"===t){let e=await (0,u.CT)(e=>({...e,status:"HOLD"}));return o.NextResponse.json(e)}return o.NextResponse.json({error:"Invalid action"},{status:400})}catch(e){return o.NextResponse.json({error:e.message},{status:400})}}let d=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/session/current/route",pathname:"/api/session/current",filename:"route",bundlePath:"app/api/session/current/route"},resolvedPagePath:"D:\\Downloads\\antigravityfiles\\trackytimer\\src\\app\\api\\session\\current\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:w}=d,E="/api/session/current/route";function S(){return(0,a.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:g})}},5610:(e,t,s)=>{s.d(t,{zA:()=>l,CT:()=>d});let r=require("fs/promises");var i=s.n(r),n=s(1017),a=s.n(n);let o=a().join(process.cwd(),"data","db.json"),u={userState:{uptime:0,securityProtocol:"AES-256",specificityLevel:4},tracks:[{id:"SYL_MOD_06_UPLINK",name:"Module_06: Technical_Console",riskLevel:"MEDIUM",status:"ACTIVE",objectives:[{id:"OBJ_601_CORE",title:"Core Logic Implementation",timeBlock:"08:00 - 09:30",intensity:"HIGH",status:"ACTIVE",progress:85},{id:"OBJ_602_REDUX",title:"State Management Refactor",timeBlock:"10:00 - 12:30",intensity:"MEDIUM",status:"PENDING",progress:0},{id:"OBJ_603_INIT",title:"System Initialization",timeBlock:"13:30 - 15:00",intensity:"LOW",status:"COMPLETED",progress:100}]}],currentSession:{date:new Date().toISOString().split("T")[0],mainTitle:"High-Stakes Focus Mode",progressPercent:72,status:"HOLD",violations:[],warningTriggered:!1,queue:[]}};async function c(){try{await i().access(o)}catch{await i().mkdir(a().dirname(o),{recursive:!0}),await i().writeFile(o,JSON.stringify(u,null,2))}}async function l(){return await c(),JSON.parse(await i().readFile(o,"utf-8"))}async function p(e){await c(),await i().writeFile(o,JSON.stringify(e,null,2))}async function d(e){let t=await l();if(!t.currentSession)throw Error("No active session");let s=e(t.currentSession);return t.currentSession=s,await p(t),s}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,972],()=>s(710));module.exports=r})();