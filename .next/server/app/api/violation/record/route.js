"use strict";(()=>{var t={};t.id=8,t.ids=[8],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:t=>{t.exports=require("path")},8397:(t,e,i)=>{i.r(e),i.d(e,{originalPathname:()=>v,patchFetch:()=>w,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>g});var r={};i.r(r),i.d(r,{POST:()=>l,dynamic:()=>c});var s=i(9303),a=i(8716),n=i(670),o=i(7070),u=i(5610);let c="force-dynamic";async function l(t){try{let{type:e}=await t.json();if(!e)return o.NextResponse.json({error:"Missing violation type"},{status:400});let i=await (0,u.CT)(t=>{if("LOCKED"===t.status||"COMPLETED"===t.status)return t;let i={id:Math.random().toString(36).substring(7),type:e,timestamp:new Date().toISOString()},r=[...t.violations,i],s=t.status,a=t.warningTriggered;return 1===r.length&&(a=!0),r.length>=2&&(s="LOCKED"),{...t,violations:r,warningTriggered:a,status:s}});return o.NextResponse.json(i)}catch(t){return o.NextResponse.json({error:t.message},{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/violation/record/route",pathname:"/api/violation/record",filename:"route",bundlePath:"app/api/violation/record/route"},resolvedPagePath:"D:\\Downloads\\antigravityfiles\\trackytimer\\src\\app\\api\\violation\\record\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:m}=p,v="/api/violation/record/route";function w(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:g})}},5610:(t,e,i)=>{i.d(e,{zA:()=>l,CT:()=>d});let r=require("fs/promises");var s=i.n(r),a=i(1017),n=i.n(a);let o=n().join(process.cwd(),"data","db.json"),u={userState:{uptime:0,securityProtocol:"AES-256",specificityLevel:4},tracks:[{id:"SYL_MOD_06_UPLINK",name:"Module_06: Technical_Console",riskLevel:"MEDIUM",status:"ACTIVE",objectives:[{id:"OBJ_601_CORE",title:"Core Logic Implementation",timeBlock:"08:00 - 09:30",intensity:"HIGH",status:"ACTIVE",progress:85},{id:"OBJ_602_REDUX",title:"State Management Refactor",timeBlock:"10:00 - 12:30",intensity:"MEDIUM",status:"PENDING",progress:0},{id:"OBJ_603_INIT",title:"System Initialization",timeBlock:"13:30 - 15:00",intensity:"LOW",status:"COMPLETED",progress:100}]}],currentSession:{date:new Date().toISOString().split("T")[0],mainTitle:"High-Stakes Focus Mode",progressPercent:72,status:"HOLD",violations:[],warningTriggered:!1,queue:[]}};async function c(){try{await s().access(o)}catch{await s().mkdir(n().dirname(o),{recursive:!0}),await s().writeFile(o,JSON.stringify(u,null,2))}}async function l(){return await c(),JSON.parse(await s().readFile(o,"utf-8"))}async function p(t){await c(),await s().writeFile(o,JSON.stringify(t,null,2))}async function d(t){let e=await l();if(!e.currentSession)throw Error("No active session");let i=t(e.currentSession);return e.currentSession=i,await p(e),i}}};var e=require("../../../../webpack-runtime.js");e.C(t);var i=t=>e(e.s=t),r=e.X(0,[948,972],()=>i(8397));module.exports=r})();